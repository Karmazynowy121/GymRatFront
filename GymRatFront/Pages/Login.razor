@page "/Login"
@using GymRatApi.Dto;
@using GymRatApi.ModuleData.Dto;
@inject NavigationManager NavigationManager

<h1>Login</h1>
    <div class="User Login">
        <EditForm Model="@user" OnSubmit="Loggin">
            <h3>Name</h3>
            <InputText @bind-Value="user.Name" />
            <h3>Password</h3>
            <InputText @bind-Value="user.Password" />
            <button class="btn-link">Submit</button>
        </EditForm>
    </div>

@code {
    private LoggedUserDto user = new();

    private async void Loggin (EditContext e)
    {
        var userDto = e.Model as LoggedUserDto;
        var client = new HttpClient();
        var respone = await client.PostAsJsonAsync("https://localhost:7060/User/login/", userDto);

        if (respone.IsSuccessStatusCode)
        {
            NavigationManager.NavigateTo("/");
        }
        
    }
}
